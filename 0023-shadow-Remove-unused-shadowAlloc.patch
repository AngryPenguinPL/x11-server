From 6dd65a6e9bd41237afe7615bea1cc9510e82781a Mon Sep 17 00:00:00 2001
From: Adam Jackson <ajax@redhat.com>
Date: Fri, 9 Dec 2016 14:52:38 -0500
Subject: [PATCH 23/30] shadow: Remove unused shadowAlloc

Signed-off-by: Adam Jackson <ajax@redhat.com>
Reviewed-by: Keith Packard <keithp@keithp.com>
---
 miext/shadow/Makefile.am |  1 -
 miext/shadow/shadow.h    |  2 --
 miext/shadow/shalloc.c   | 49 ------------------------------------------------
 3 files changed, 52 deletions(-)
 delete mode 100644 miext/shadow/shalloc.c

diff --git a/miext/shadow/Makefile.am b/miext/shadow/Makefile.am
index b611c9b..dabbf03 100644
--- a/miext/shadow/Makefile.am
+++ b/miext/shadow/Makefile.am
@@ -13,7 +13,6 @@ libshadow_la_SOURCES =		\
 	sh3224.c		\
 	shafb4.c		\
 	shafb8.c		\
-	shalloc.c		\
 	shiplan2p4.c		\
 	shiplan2p8.c		\
 	shpacked.c		\
diff --git a/miext/shadow/shadow.h b/miext/shadow/shadow.h
index b8cd1b5..c08e153 100644
--- a/miext/shadow/shadow.h
+++ b/miext/shadow/shadow.h
@@ -81,8 +81,6 @@ shadowAdd(ScreenPtr pScreen,
 extern _X_EXPORT void
  shadowRemove(ScreenPtr pScreen, PixmapPtr pPixmap);
 
-extern _X_EXPORT void *shadowAlloc(int width, int height, int bpp);
-
 extern _X_EXPORT void
  shadowUpdateAfb4(ScreenPtr pScreen, shadowBufPtr pBuf);
 
diff --git a/miext/shadow/shalloc.c b/miext/shadow/shalloc.c
deleted file mode 100644
index 6a79085..0000000
--- a/miext/shadow/shalloc.c
+++ /dev/null
@@ -1,49 +0,0 @@
-/*
- * Copyright Â© 2000 Keith Packard
- *
- * Permission to use, copy, modify, distribute, and sell this software and its
- * documentation for any purpose is hereby granted without fee, provided that
- * the above copyright notice appear in all copies and that both that
- * copyright notice and this permission notice appear in supporting
- * documentation, and that the name of Keith Packard not be used in
- * advertising or publicity pertaining to distribution of the software without
- * specific, written prior permission.  Keith Packard makes no
- * representations about the suitability of this software for any purpose.  It
- * is provided "as is" without express or implied warranty.
- *
- * KEITH PACKARD DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,
- * INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO
- * EVENT SHALL KEITH PACKARD BE LIABLE FOR ANY SPECIAL, INDIRECT OR
- * CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE,
- * DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
- * TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
- * PERFORMANCE OF THIS SOFTWARE.
- */
-
-#ifdef HAVE_DIX_CONFIG_H
-#include <dix-config.h>
-#endif
-
-#include    <X11/X.h>
-#include    "scrnintstr.h"
-#include    "windowstr.h"
-#include    <X11/fonts/font.h>
-#include    "dixfontstr.h"
-#include    <X11/fonts/fontstruct.h>
-#include    "mi.h"
-#include    "regionstr.h"
-#include    "globals.h"
-#include    "gcstruct.h"
-#include    "shadow.h"
-
-void *
-shadowAlloc(int width, int height, int bpp)
-{
-    int stride;
-    void *fb;
-
-    /* Cant use PixmapBytePad -- the structure is probably not initialized yet */
-    stride = BitmapBytePad(width * bpp);
-    fb = xallocarray(stride, height);
-    return fb;
-}
-- 
2.8.3

